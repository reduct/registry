"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();!function(e){var t={isTestingEnv:process&&process.title&&!!~process.title.indexOf("reduct"),packageVersion:{major:1,minor:0,patch:0}},r=this;"undefined"!=typeof window?r=window:"undefined"!=typeof global?r=global:"undefined"!=typeof self&&(r=self),r.reduct||(r.reduct={}),"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(r,t):"function"==typeof define&&define.amd?define([],function(){return e(r,t)}):r.reduct.registry=e(r,t)}(function(e,t){function r(e){if("[object Function]"===Object.prototype.toString.call(e)){if("name"in e&&e.name)return e.name;var t=/^\s*function\s*([^\(]*)/im,r=e.name||t.exec(e.toString())[1];if(r)return r}throw new Error("@reduct/registry Error: Could not guess name of registered item. Please specify an explicit alias.")}var n=function(){function e(){_classCallCheck(this,e),this.items={},this.deferred={}}return _createClass(e,[{key:"get",value:function(e){if(!e in this.items)throw new Error("@reduct/registry Error: Could not find "+e+".");return this.items[e]}},{key:"expect",value:function(e){var t=this,r=arguments.length<=1||void 0===arguments[1]?1e3:arguments[1];return new Promise(function(n,i){e in t.items&&n(t.items[e]),t.deferred[e]=n,r>0&&setTimeout(i,r)})}},{key:"await",value:function(e){return this.expect(e,0)}},{key:"register",value:function(e){var t=this,n=arguments.length<=1||void 0===arguments[1]?"":arguments[1];return"object"==typeof e&&Object.getPrototypeOf(e)===Object.prototype?void Object.keys(e).forEach(function(r){return t.register(r,e)}):(n=n||r(e),this.items[n]=e,n in this.deferred&&(this.deferred[n](e),delete this.deferred[n]),this)}},{key:"registerAll",value:function(e){var t=this;return Object.keys(e).forEach(function(r){return t.register(e[r],r)}),this}}]),e}(),i=function o(){var o=new n,e={register:function(e){var t=arguments.length<=1||void 0===arguments[1]?"":arguments[1];return o.register(e,t)},registerAll:function(e){return o.registerAll(e)},get:function(e){return o.get(e)},expect:function(){return o.expect()},await:function(){return o.await()}};return t.isTestingEnv&&(e.items=o.items,e.deferred=o.deferred),e};return i.version=t.packageVersion,i});